{% extends 'baseAbo.html' %}
{% load static %}
{% load tags %}
{% block body_block %}
<div class="panel panel-warning">
<div class="panel-heading">
  <span class="glyphicon glyphicon-user"> </span> {{client.get_civilite_display}} {{client.name}} {{client.family_name|upper}}
  <div style="float:right"><span id="editClient" class="glyphicon glyphicon-pencil"></span><span id="saveClient" class="glyphicon glyphicon-floppy-disk" style="display:none"></span></div>
</div>
<table class="table">
  <tr class="clientInfo"><td> EMAIL </td><td>{{client.email}}</td></tr>   
  <tr class="clientInfo"><td> ADRESS </td><td>{{client.adress}}</td></tr>   
  <tr class="clientInfo"><td> INFORMÉ </td><td>{{client.info}}</td></tr>   
  <tr class="clientInfo"><td> NOTE </td><td>{{client.remark}}</td></tr>   
  <tr class="clientInfoEdit">
    <td> EMAIL </td>
    <td>
      <div class="input-group">
      <span class="input-group-addon" id="basic-addon1">@</span>
      <input type="text" class="form-control" value="{{client.email}}" aria-describedby="basic-addon1">
      </div>
    </td>
  </tr>   
  <tr class="clientInfoEdit">
    <td> ADRESS </td>
    <td><textarea class="form-control" rows="3">{{client.adress}}</textarea></td>
  </tr> 
  <tr class="clientInfoEdit">
    <td> INFORMÉ </td>
    <td>
      <input type="checkbox" {% if client.info %}checked{% endif %}> être informé
    </td>
  </tr>   
  <tr class="clientInfoEdit">
    <td> NOTE </td>
    <td><input class="form-control" type="text" value="{{client.remark}}"></td>
  </tr>   
</table>
</div>
<hr />
{% if dons  %}
<div class="panel panel-warning">
<div class="panel-heading">捐款</div>
<table class="table">
<tr><th>#</th><th>金額</th><th>已付款</th><th>收據</th></tr>
{% for don in dons %}
<tr>
  <td>{{forloop.counter}}</td>
  <td>{{don.amount}}</td>
  <td>{{don.received}}</td>
  <td>{{don.receipt}}</td>
</tr>
{% endfor %}
</table>
</div>
<hr />
{% endif %}

{% if subs %}
<div class="panel panel-warning">
<div class="panel-heading">訂閱</div>
<table class="table">
<tr><th>#</th><th>開始</th><th>結束</th><th>數量</th><th>付款</th></tr>
{% for sub in subs %}
<center>
<tr>
  <td>{{forloop.counter}}</td>
  <td>{{sub.start}}</td>
  <td>{{sub.end}}</td>
  <td>{{sub.quantity}}</td>
  <td>{{sub.get_payment_display}}</td>
</tr>
</center>
{% endfor %}
</table>
</div>
{% endif %}

<script>
$(document).on('click', '#editClient', function() {
    $("#saveClient").show();
    $("#editClient").hide();
    $('.clientInfo').hide();
    $('.clientInfoEdit').show();
});

$(document).on('click', '#saveClient', function() {
        $("#editClient").show();
        $("#saveClient").hide();
});
</script>
{% endblock %}
