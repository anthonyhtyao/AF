{% extends 'base.html' %}
{% block body_block %}
{% load static %}
<!-- This page presents information of given numero, url for this page: /no/:id-->
<div class="col-md-8 col-md-offset-2">
<!-- title for this numero depends on language -->
<p><a href="/admin/auroreformosa/numero/add/"> Add new archive </a></p>
{% for dist in data %}
    <h2>{{dist.numero}} {{dist.numero.titleFR}}/{{dist.numero.titleTW}}</h2>
    <ul>
      <li> Image :
        {% if dist.image != None %}
        <!--Display archive image when mouse over -->
        <a title="" href="#" onmouseover="tooltipArchiveImg(this)" onmouseout="closeTooltip(this)" value="{{dist.image.imgfile.url}}">{{dist.image}}</a>
        {% else %}
        Not exists
        {% endif %}
      </li>
      <li> Edito : FR : 
        {% if dist.editoFR != "" %}
        {{dist.editoFR}}
        {% else %}
        Not exists
        {% endif %} / TW : 
        {% if dist.editoTW != "" %}
        {{dist.editoTW}}
        {% else %}
        Not exists
        {% endif %}
      </li>  
      <li> Headline: 
        {% if dist.headline != "" %}
        <a href="/{{dist.headline.category}}/article/{{dist.headline.slg}}">{{dist.headline}}</a>
        {% else %}
        Not exists
        {% endif %}
      </li>  
      <li> Comic : FR : 
        {% if dist.comicFR != "" %}
        <a class="FR" href="/comics/{{dist.comicFR.article.slg}}" title="" onmouseover="tooltipArchiveImg(this)" onmouseout="closeTooltip(this)" value="{{dist.comicFR.image.imgfile.url}}" >{{dist.comicFR}}</a>
        {% else %}
        Not exists
        {% endif %} / TW :  
        {% if dist.comicTW != "" %}
        <a class="TW" href="/comics/{{dist.comicTW.article.slg}}" title="" onmouseover="tooltipArchiveImg(this)" onmouseout="closeTooltip(this)" value="{{dist.comicTW.image.imgfile.url}}" >{{dist.comicTW}}</a>
        {% else %}
        Not exists
        {% endif %}
      </li>
      <li>
        Article : 
        <ul>
          {% for article in dist.articles %}
            <li>
            FR : 
            {% if article.articleFR != "" %}
            <a class="FR" href="/{{article.article.category}}/article/{{article.article.slg}}">{{article.articleFR}}</a>
            {% else %}
            Not exists
            {% endif %}
             / TW : 
            {% if article.articleTW != "" %}
            <a class="TW" href="/{{article.article.category}}/article/{{article.article.slg}}">{{article.articleTW}}</a>
            {% else %}
            Not exists
            {% endif %}
            </li>
          {% endfor %}
            <li>
              <a href="/createarticle"> Add new article </a>
            </li>
        </ul>
      </li> 
    </ul>
{% endfor %}

<script>
       function tooltipArchiveImg(x) {
           var value = $(x).attr('value');
           $(x).tooltip({content:'<img width="100%" src=' + value + '/>'});
       }
       function closeTooltip(x) {
           $(x).tooltip("close");
       }
       $(".test").tooltip({ content:'<img width="100%" src="/media/img/v1.jpg" />'});
       $(".FR").click(function(){
         $.ajax({
            type:"POST",
            url:"/session_language/",
            data: { language:'fr', csrfmiddlewaretoken: '{{ csrf_token }}'},
            success: function(){
            }
         });
        });
      $(".TW").click(function(){
        $.ajax({
            type:"POST",
            url:"/session_language/",
            data: { 'language':'tw', csrfmiddlewaretoken: '{{ csrf_token }}'},
            success: function(){
            }
        });
     });
</script>


{% endblock %}
